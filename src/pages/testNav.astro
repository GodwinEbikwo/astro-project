---
import Faker from '../components/Faker.astro';
import Box from '../layouts/Box.astro';
---

<Box title='TestNav'>
  <Faker />
</Box>

<style lang='scss'>
  h1,
  h2,
  h3,
  h4,
  h5 {
    margin: 3rem 0 1.38rem;
    font-family: 'Poppins', sans-serif;
    font-weight: 400;
    line-height: 1.3;
  }

  h1 {
    margin-top: 0;
    font-size: 4.209rem;
  }

  h2 {
    font-size: 3.157rem;
  }

  h3 {
    font-size: 2.369rem;
  }

  h4 {
    font-size: 1.777rem;
  }

  h5 {
    font-size: 1.333rem;
  }

  small,
  .text_small {
    font-size: 0.75rem;
  }
</style>

<script>
  import { gsap } from 'gsap';

  let counter = {
    value: 0,
  };

  let customDuration = 7;

  let customEase =
    'M0,0 C0.016,0.074 0.057,0.135 0.105,0.187 0.226,0.198 0.246,0.312 0.292,0.362 0.284,0.452 0.371,0.498 0.371,0.549 0.371,0.636 0.448,0.663 0.5,0.7 0.594,0.766 0.508,0.891 0.601,0.942 0.612,1.022 0.789,1 1,1 ';

  //checks if the user has visited any page on our website I guess
  if (sessionStorage.getItem('visited') !== null) {
    customDuration = 3;
    counter = {
      value: 75,
    };
  }

  sessionStorage.setItem('visited', 'true');

  function updateLoaderText() {
    let progress = Math.round(counter.value);
    document.getElementById('loader_num').innerHTML = `${progress}`;
  }

  const tl = gsap.timeline({});

  tl.to(counter, {
    onUpdate: updateLoaderText,
    value: 100,
    duration: customDuration,
  });

  tl.to(
    '.loader_progress',
    {
      width: '100%',
      duration: customDuration,
    },
    0
  );
</script>
